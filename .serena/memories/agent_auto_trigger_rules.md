# 専門エージェント自動起動ルール

CLAUDE.mdに以下のルールを追加済み（2025-12-14）

## 重要: このルールは必ず遵守すること
ユーザーからの明示的な指示がなくても、条件に合致すれば自律的にエージェントを起動する。

---

## schema-designer（DB設計専門家）

### 起動条件
- DBスキーマの作成・変更
- マイグレーションの作成・修正
- Drizzle ORMのテーブル定義変更
- リレーション（外部キー）の設計・変更
- RLSポリシーの設計

### 役割
- 正規化（3NF）の確認
- 制約・インデックス戦略のレビュー
- Drizzle ORM実装パターンの検証
- Supabase固有設定（RLS等）の確認

### 定義ファイル
`.claude/agents/schema-designer.md`

---

## ui-ux-specialist（UI/UX専門家）

### 起動条件
- UIコンポーネントの新規作成
- 既存コンポーネントのスタイル変更
- レイアウト・デザインの変更
- レスポンシブ対応の実装

### 役割
- デザインシステム一貫性の確認
- Atomic Design構造の検証
- shadcn/uiコンポーネント使用の確認
- セマンティックカラートークンの確認
- モバイルファースト・アクセシビリティの検証

### 定義ファイル
`.claude/agents/ui-ux-specialist.md`

---

## code-reviewer（コードレビュー専門家）

### 起動条件
- 実装作業が完了した後（コミット前）
- 複数ファイルにまたがる変更を行った後
- ユーザーからレビュー依頼があった場合

### 役割
- git diffで変更を確認
- SOLID原則の遵守確認
- プロジェクトアーキテクチャ標準の検証
- セキュリティベストプラクティスの確認
- テストカバレッジの検証

### 定義ファイル
`.claude/agents/code-reviewer.md`

---

## 実装方法

Taskツールを使用してエージェントを呼び出す:

```
Task(
  subagent_type: "schema-designer" | "ui-ux-specialist" | "code-reviewer",
  prompt: "レビュー対象や作業内容の説明",
  model: "sonnet"  // エージェント定義で指定
)
```

### 複数エージェントの起動
条件が複数該当する場合は、関連するエージェントを順次起動する。

例: UIコンポーネントを新規作成した場合
1. ui-ux-specialist → デザイン・アクセシビリティ確認
2. code-reviewer → コード品質・アーキテクチャ確認
